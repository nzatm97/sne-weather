<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Southern New England Weather</title>
    <meta name="description" content="Southern New England Weather dashboard with radar, alerts, meteogram, and layered map insights." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700&family=JetBrains+Mono:wght@500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="site-layout">
      <aside class="sidebar">
        <div class="top-banner" role="img" aria-label="SNEZ Weather banner"></div>
        <nav>
          <a class="nav-link active" href="index.html">Home</a>
          <a class="nav-link" href="about.html">About Us</a>
          <a class="nav-link" href="contact.html">Contact</a>
          <a class="nav-link" href="social.html">Social Media</a>
        </nav>
      </aside>

      <div class="content-wrap">
        <section class="hero-photo card">
          <div class="hero-panels">
            <section class="hero-action-panel hero-action-panel--location">
              <h1 class="step-heading">Choose Your Location</h1>
              <div class="location-controls">
                <div class="search-wrap">
                  <input id="locationSearch" type="search" placeholder="Search city, state (e.g., Boston, MA)" aria-label="Location search" />
                  <ul id="searchResults" class="search-results" aria-label="Location suggestions"></ul>
                </div>
                <button id="myLocationBtn" class="btn btn-secondary">My location</button>
              </div>
            </section>

            <section class="hero-action-panel hero-action-panel--model">
              <h1 class="step-heading">Choose Your Weather Model.</h1>
              <label for="forecastSource" class="sr-only">Forecast Source</label>
              <select id="forecastSource" aria-label="Forecast Source">
                <option value="noaa">National Weather Service (NOAA/NWS)</option>
                <option value="gfs">American Model (GFS)</option>
                <option value="ecmwf">European Model (ECMWF)</option>
              </select>
              <p id="forecastSourceStatus" class="muted">Selected: National Weather Service (NOAA/NWS)</p>
              <p class="step-subtle" aria-hidden="true">Scroll to View Forecast ↓</p>
            </section>
          </div>
        </section>

        <p id="status" class="status">Initializing dashboard…</p>

        <main class="grid-layout">
          <section class="map-panel card">
            <div class="map-header">
              <h2 id="currentPlace">Hartford, CT</h2>
              <span class="badge">Radar + Alerts</span>
            </div>

            <section class="current-hero card">
              <div class="current-hero__icon" id="currentIconLarge" aria-hidden="true">--</div>
              <div class="current-hero__main">
                <p class="current-hero__label">Current Conditions</p>
                <div class="current-hero__temp" id="tempNow">--</div>
                <div class="current-hero__summary" id="summaryNow">--</div>
              </div>
              <div class="current-hero__meta">
                <div><span class="metric">Feels</span><strong id="feelsNow">--</strong></div>
                <div><span class="metric">Wind</span><strong id="windNow">--</strong></div>
              </div>
            </section>

            <div class="layer-controls">
              <span class="chip">Overlay</span>
              <label><input id="layerRadar" type="checkbox" checked /> Radar</label>
            </div>

            <div id="map" class="map"></div>

            <div class="controls-grid">
              <div class="radar-controls">
                <h3>Radar Timeline</h3>
                <div class="inline-controls">
                  <button id="radarPrevBtn" class="btn btn-ghost" aria-label="Previous radar frame">Prev</button>
                  <button id="radarPlayBtn" class="btn">Play</button>
                  <button id="radarNextBtn" class="btn btn-ghost" aria-label="Next radar frame">Next</button>
                  <button id="radarLatestBtn" class="btn btn-secondary">Latest</button>
                </div>
                <div class="inline-controls">
                  <input id="radarFrameRange" type="range" min="0" max="0" value="0" />
                </div>
                <div class="inline-controls">
                  <label for="radarSpeed">Speed</label>
                  <select id="radarSpeed">
                    <option value="0.75">0.75x</option>
                    <option value="1" selected>1x</option>
                    <option value="1.25">1.25x</option>
                    <option value="1.5">1.5x</option>
                  </select>
                  <label for="radarOpacity">Opacity</label>
                  <input id="radarOpacity" type="range" min="0.2" max="1" value="0.72" step="0.05" />
                  <span id="radarTimestamp" class="muted value-mono">--:--</span>
                </div>
                <div class="inline-controls">
                  <span id="radarLoadState" class="muted">Loading radar…</span>
                </div>
              </div>
              <div class="legend">
                <h3>Reflectivity</h3>
                <div class="legend-bar"></div>
                <div class="legend-scale"><span>Light</span><span>Moderate</span><span>Heavy</span></div>
              </div>
            </div>
          </section>

          <aside class="side-panel">
            <section class="card">
              <details class="alerts-details" open>
                <summary>
                  <span>NWS Alerts</span>
                  <small>Tap to expand</small>
                </summary>
                <div class="alerts-tools">
                  <label><input id="alertsToggle" type="checkbox" checked /> Show polygons</label>
                </div>
                <ul id="alertsList" class="alerts-list"></ul>
              </details>
            </section>

            <section class="card">
              <div class="section-head">
                <h3>Past Weather (Meteogram)</h3>
                <select id="meteogramRange">
                  <option value="24">24h</option>
                  <option value="48" selected>48h</option>
                  <option value="72">72h</option>
                </select>
              </div>
              <div class="meteogram-wrap"><canvas id="meteogram"></canvas></div>
            </section>

            <section class="card">
              <details class="hourly-details">
                <summary>
                  <span>Next 18 Hours Forecast</span>
                  <small>Tap to expand</small>
                </summary>
                <div id="hourlyGrid" class="hourly-grid"></div>
              </details>
            </section>

            <section class="card">
              <h3>5-Day Forecast</h3>
              <div id="dailyGrid" class="daily-grid"></div>
            </section>

            <section class="card">
              <h3>Recent Searches</h3>
              <div id="recentSearches" class="pill-row"></div>
            </section>
          </aside>
        </main>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
